const __vite__fileDeps=["js/index-chunk-BcwvLsvs.js","js/vendor-chunk-DQtbaVMJ.js","css/vendor-H3uQoJr_.css","js/other-chunk-DIQDUVaP.js","css/other-CvUhWjKK.css","js/index-chunk-CXpqK_ZZ.js","js/weather-chunk-B8aDALRS.js","css/weather-BQ177_5M.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var ne=Object.defineProperty;var se=(s,e,t)=>e in s?ne(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var T=(s,e,t)=>(se(s,typeof e!="symbol"?e+"":e,t),t);import{j as n,a as oe,M as x,c as re,b as ae,d as E,u as U,e as L,r as d,f as B,I as C,L as y,T as F,O as ie,F as z,g as O,h as ce,i as le,B as ue,N as de,k as he,l as me,m as fe,n as pe,o as ge,P as ye}from"./vendor-chunk-DQtbaVMJ.js";function ft(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const _e="_loadingView_pn4tz_1",xe="_layoutinfaed_pn4tz_1",je="_loading_pn4tz_1",be="_layoutloading_pn4tz_1",A={loadingView:_e,layoutinfaed:xe,loading:je,layoutloading:be};function Le(){const s=new Array(20).fill(1).map((e,t)=>t);return n.jsx("div",{className:A.loadingView,children:n.jsx("div",{className:A.loading,children:s.map(e=>n.jsx("span",{style:{"--i":e}},e))})})}const w="token",S=localStorage;function V(){return S.getItem(w)}function ve(s=""){S.setItem(w,s)}function Re(s=""){S.removeItem(s||w)}const Ee="modulepreload",we=function(s){return"/"+s},I={},b=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.all(t.map(i=>{if(i=we(i),i in I)return;I[i]=!0;const m=i.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(i,'"]').concat(f)))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":Ee,m||(u.as="script",u.crossOrigin=""),u.href=i,c&&u.setAttribute("nonce",c),document.head.appendChild(u),m)return new Promise((p,l)=>{u.addEventListener("load",p),u.addEventListener("error",()=>l(new Error("Unable to preload CSS for ".concat(i))))})}))}return o.then(()=>e()).catch(a=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a})},P={OVERDUE:600,FAIL:999,SUCCESS:200};class Se{constructor(e){T(this,"service");this.service=oe.create(e),this.service.interceptors.request.use(t=>t,t=>{Promise.reject(t)}),this.service.interceptors.response.use(t=>{const{data:r,config:o}=t;return t.status===P.OVERDUE||t.status&&t.status!==P.SUCCESS?Promise.reject(r):r},t=>{const{response:r}=t;if(console.log(r,t),r)this.handleCode(r.status,r.statusText);else switch(t.code){case"ECONNABORTED":x.error("终止连线~~~");break;case"ERR_NETWORK":x.error("网络异常~~~");break}window.navigator.onLine})}handleCode(e,t){switch(e){case 401:console.log(e,t),Re(),window.location.href="/login",x.error("身份验证过期~~~");break}}needTokenFun(e=!0){return Object.prototype.toString.call(e)=="[object Object]"?e:e?(()=>{const r={headers:{}},o=V();return o&&(r.headers.Authorization="Bearer "+o),r})():{}}get(e,t,r=!0){const o=this.needTokenFun(r);return this.service.get(e,{params:t,...o})}post(e,t,r=!0){const o=this.needTokenFun(r);return this.service.post(e,t,o)}put(e,t,r=!0){const o=this.needTokenFun(r);return this.service.put(e,t,{...o})}delete(e,t,r=!0){const o=this.needTokenFun(r);return this.service.delete(e,t,o)}}const $="http://test.meseelink.com";console.log($);const Te={baseURL:$,timeout:20*1e3,withCredentials:!1},q=new Se(Te);function Ce(s){return q.post("/login",s)}function Oe(){return q.get("/verify")}const H="auth",j=re("auth/verify",async()=>Oe()),k={status:"idel",lastUpdateTime:0,dynamicAddedRoutes:!1,builderMenuList:[],perCode:-1},K=ae({name:H,initialState:k,reducers:{resetState(s){console.log(k)},setLastUpdateTime(s,{payload:e}){s.lastUpdateTime=e},setDynamicAddedRoutes(s,{payload:e}){console.log(s.dynamicAddedRoutes,e,">>>"),s.dynamicAddedRoutes=e},setBuilderMenuList(s,{payload:e}){s.builderMenuList=e}},extraReducers(s){s.addCase(j.pending,(e,t)=>{e.status="loading"}).addCase(j.fulfilled,(e,t)=>{if(!t.payload)return;const{code:r,data:o,message:a}=t.payload;e.status="successed",e.lastUpdateTime=new Date().getTime(),r!=200}).addCase(j.rejected,e=>{e.status="rejected",console.log("reject")})}}),{resetState:gt,setLastUpdateTime:M,setDynamicAddedRoutes:Ae,setBuilderMenuList:Ie}=K.actions,G=s=>s[H],Pe=K.reducer,ke=E.Item,Me=E.SubMenu;function Ne(){const s=U(),e=L(),[t,r]=d.useState("/"),[o,a]=d.useState([]),{status:c,builderMenuList:i}=B(G);d.useEffect(()=>{const l=W(i);a(l)},[i]),d.useEffect(()=>{const l=s.pathname;r(l)},[s.pathname]);function m(l){switch(l){case"/dashboard":return n.jsx(C,{});case"/classify":return n.jsx(C,{})}}function f(l){return l.map(h=>h.children&&h.children.length?n.jsx(Me,{title:n.jsxs(n.Fragment,{children:[m(h.key),h.label]}),children:f(h.children)},h.key):n.jsx(ke,{style:{transition:"all 0.25s"},children:h.label},h.key))}function u(l){if(console.log(l),l){t!==l&&e(l);return}console.log("跳转失败~~~~",l)}const p=f(o);return n.jsx(E,{selectedKeys:t,style:{height:"100%"},autoOpen:!0,onClickMenuItem:u,children:p})}function W(s){const e=[];return s.forEach(t=>{const r=t.meta||{},o=t.path,a={key:t.path,...r};if(Array.isArray(t.children)&&t.children.length){const c=W(t.children).map(i=>({...i,key:i.key?"".concat(o,"/").concat(i.key):i.key}));c.length&&(a.children=c)}e.push(a)}),e}const De="_defaultLayout_1ywh5_1",Ue="_sider_1ywh5_6",Be="_overflow_1ywh5_12",Fe="_content_1ywh5_16",ze="_exit_1ywh5_23",v={defaultLayout:De,sider:Ue,overflow:Be,content:Fe,exit:ze},Ve=y.Sider,$e=y.Header,qe=y.Content;function g({children:s}){const[e,t]=d.useState(!1);return n.jsxs(y,{className:v.defaultLayout,children:[n.jsx($e,{style:{borderBottom:"1px solid #ededed"},children:n.jsx(F.Title,{heading:5,style:{margin:"10px 15px"},children:"测试管理后台"})}),n.jsxs(y,{children:[n.jsx(Ve,{width:220,style:{position:"relative",zIndex:210},collapsed:e,children:n.jsx("div",{className:v.sider,children:n.jsx(Ne,{})})}),n.jsx(qe,{className:v.content,children:n.jsx(He,{children:s})})]})]})}function He(s){const{children:e}=s;return e||n.jsx(ie,{})}const Ke="_loginLayout_wev6t_1",Ge="_loginBox_wev6t_6",R={loginLayout:Ke,loginBox:Ge},_=z.Item;function We(){const s=L(),[e,t]=d.useState(!1),r={username:"admin",password:"123456"},o=d.useRef();async function a(c){t(!0);const i=await Ce(c);i&&i.code==200?(ve(i.data.token),s("/")):(o.current&&o.current.setFields({username:{error:{message:"账号或者密码错误"}},password:{error:{message:"账号或者密码错误"}}}),x.error((i==null?void 0:i.message)||"登录失败")),t(!1)}return n.jsx("div",{className:R.loginLayout,children:n.jsx("div",{className:R.loginBox,children:n.jsxs(z,{size:"large",style:{width:320},autoComplete:"off",wrapperCol:{span:24},ref:o,initialValues:r,onSubmit:a,children:[n.jsx(_,{children:n.jsx(F.Title,{heading:6,children:"欢迎登录"})}),n.jsx(_,{style:{marginBottom:20},field:"username",rules:[{required:!0,message:"请填写用户账号"}],children:n.jsx(O,{prefix:n.jsx(ce,{}),placeholder:"请输入您的账号"})}),n.jsx(_,{style:{marginBottom:20},field:"password",rules:[{required:!0,message:"请填写用户密码"}],children:n.jsx(O.Password,{prefix:n.jsx(le,{}),placeholder:"请输入您的密码"})}),n.jsx(_,{children:n.jsx(ue,{long:!0,className:R.submitBtn,htmlType:"submit",loading:e,onClick:async()=>{},children:"登录"})})]})})})}function Ye(){return n.jsx("div",{children:"test"})}const Y="/dashboard",Je={path:"/classify",name:"Classify",element:n.jsx(g,{}),order:2,children:[{path:"index",element:()=>b(()=>import("./index-chunk-BcwvLsvs.js"),__vite__mapDeps([0,1,2])),meta:{label:"首项"}},{path:"other",element:()=>b(()=>import("./other-chunk-DIQDUVaP.js"),__vite__mapDeps([3,1,2,4])),meta:{label:"其他"}}],meta:{label:"分类"}},Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),Xe={path:"/dashboard",name:"Dashboard",order:1,element:n.jsx(g,{}),children:[{path:"work",element:()=>b(()=>import("./index-chunk-CXpqK_ZZ.js"),__vite__mapDeps([5,1,2])),meta:{label:"工作台"}}],meta:{label:"仪表盘",icon:"IconDashboard"}},Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Xe},Symbol.toStringTag,{value:"Module"})),et={path:"/timing",name:"Timing",order:3,element:n.jsx(g,{}),children:[{path:"weather",element:()=>b(()=>import("./weather-chunk-B8aDALRS.js"),__vite__mapDeps([6,1,2,7])),meta:{label:"天气"}}],meta:{label:"定时任务",icon:"IconDashboard"}},tt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));function nt(){const s=L();return n.jsxs("div",{children:[n.jsx("h1",{children:"404"}),n.jsx("button",{onClick:()=>s("/"),children:"点击跳转"})]})}const st={path:"*",element:n.jsx(g,{children:n.jsx(nt,{})})},N=Object.assign({"../modules/classify.jsx":Qe,"../modules/dashboard.jsx":Ze,"../modules/timing.jsx":tt}),J=[];Object.keys(N).forEach(s=>{const e=N[s].default||{},t=Array.isArray(e)?[...e]:[e];J.push(...t)});const D=[...J],ot={path:"/",exact:!0,element:n.jsx(g,{}),children:[{path:"",element:n.jsx(de,{to:Y,replace:!0})}],meta:{label:"root"}},rt={path:"/login",element:n.jsx(We,{}),meta:{label:"登录"}},at={path:"/test",element:n.jsx(g,{children:n.jsx(Ye,{})})},Q=[ot,rt,at],it=()=>n.jsx(n.Fragment,{children:""});function ct({routeElement:s}){const e=d.lazy(s);return n.jsx(d.Suspense,{fallback:n.jsx(it,{}),children:n.jsx(e,{})})}function X(s){return s.map((e,t)=>{const r=Object.assign({},e);return typeof e.element=="function"&&(r.element=n.jsx(ct,{routeElement:e.element})),e.children&&(r.children=X(e.children)),r})}const Z=[];[...Q].forEach(s=>{Z.push(s.path)});function lt(){const s=U(),e=L(),t=he(),{status:r,lastUpdateTime:o,dynamicAddedRoutes:a}=B(G),[c,i]=d.useState([]),m=d.useCallback(()=>t(j()),[]),f=d.useMemo(()=>n.jsx(ut,{routes:c,children:" "}),[c]);return d.useEffect(()=>{const u=s.pathname,p=V();if(Z.includes(u)){if(M(0),!p&&u!=="/login"){e("/login",{replace:!0});return}else p&&u==="/login"&&e(Y,{replace:!0});M(new Date().getTime());return}if(o===0&&m(),a)return;i(D);const l=ee(D);t(Ie(l.sort((h,te)=>h.order-te.order))),t(Ae(!0))},[s.pathname]),d.useEffect(()=>{},[]),r==="loading"?n.jsx(Le,{}):n.jsx(n.Fragment,{children:f})}function ut({routes:s}){const e=s.map(r=>{const o=Object.assign({},r);return o.children&&(o.children=X(o.children)),o}),t=[...Q,...e,st];return me(t)}function ee(s){return s.map(e=>{const{children:t,element:r,...o}=e,a={...o};return t&&t.length&&(a.children=ee(t)),a})}function dt(){return n.jsx(n.Fragment,{children:n.jsx(lt,{})})}const ht=fe({reducer:{auth:Pe}});pe.createRoot(document.getElementById("root")).render(n.jsx(ge,{children:n.jsx(ye,{store:ht,children:n.jsx(dt,{})})}));export{ft as __vite_legacy_guard,q as a};
